# ZJU SQTP 导航网站 - 阶段记录（统一版）

---

# 第 1 步：功能设计记录

日期：2026-02-04  
阶段：功能设计（Step 1）  
目标：明确数据与可见性边界，覆盖“学科资源 / 常用网站 / 评论 / 在线自习室”。

## 1. 范围与内容

- 学科资源：分类 → 资源 → 评论与点赞。
- 常用网站：主页导航 + 个人自定义网站。
- 自习室：番茄钟、在线人数展示。
- 可见性：学习资源未来可全员共享；个人网站仅本地可见。

## 2. 结果与约束

- 数据结构：`studyResourceCategories`、`sites`、`studyRoom`、`futureShared`。
- 本地存储：评论、点赞、个人网站、分区、待办、稍后再学、上传内容。
- Demo 阶段：静态数据 + localStorage 模拟。

## 3. 交付物

- 数据结构文件： [frontend/data/data.json](frontend/data/data.json)
- 本地存储规划（约定）：`resourceCommentsById`、`resourceLikesById`、`userCustomSites`、`siteSections`、`siteAssignments` 等。

## 4. 待续事项

- 第 2 步：UI 设计
- 第 3 步：前端开发

---

# 第 2 步：UI 设计记录

日期：2026-02-04  
阶段：UI 设计（Step 2）  
目标：确定布局与视觉风格，明确交互入口。

## 1. 范围与内容

- 固定视口 App 风格布局（顶部区 + 主三栏）。
- 关键组件：学科资源、常用网站、待办、稍后再学、自习室。
- 交互入口：资源卡片“打开/评论/稍后再学”，网站分区管理与拖拽。

## 2. 结果与约束

- 模块布局：顶部常用网站+待办；主区三栏（导航/内容/稍后再学）；自习室悬浮。
- 视觉规范：主色 #2B5ECF，浅底背景，卡片圆角与阴影，胶囊标签。

## 3. 交付物

- 文字版 UI 方案
- 组件与交互口径

## 4. 待续事项

- 进入前端实现与交互落地

---

# 第 3 步：前端开发记录

日期：2026-02-05  
阶段：前端开发（Step 3）  
结论：前端开发圆满完成。

## 1. 范围与内容

- 页面结构：顶部常用网站 + 待办；主区三栏；悬浮自习室。
- 功能模块：资源渲染/搜索/排序/评论/点赞/举报/稍后再学。
- 网站分区：新增分区、重命名、删除、拖拽归类、添加网站。
- 待办：新增/勾选/删除，本地保存。
- 上传/申请：上传内容与“申请添加”弹窗流程。

## 2. 结果与约束

- 固定视口布局：页面不整体滚动，仅内容区滚动。
- 自习室：番茄钟、时间选择、点击空白收起、拖拽移动、折叠。
- 常用网站：登录 VPN 快捷按钮。

## 3. 交付物

- 前端页面：[frontend/index.html](frontend/index.html)
- 样式与交互：[frontend/styles.css](frontend/styles.css)、[frontend/app.js](frontend/app.js)

## 4. 下一步

- 2026-02-06 起启动后端开发。

---

# 后端开发前置总结（Python + SQLite）

日期：2026-02-05  
阶段：后端准备  
目标：明确前端未覆盖能力与 API 范围。

## 1. 前端未覆盖的后端任务

- 用户鉴权与权限（登录、角色）。
- 学科资源投稿入库与审核流（前端仅提示）。
- 评论/点赞/举报持久化。
- 常用网站分区与自定义网站持久化。
- 待办与稍后再学持久化。
- 自习室在线人数统计。
- 搜索与排序的后端支持。
- 管理侧接口（审核、删除、置顶、封禁）。

## 2. API 接口文档（草案）

Base：/api  
认证：Authorization: Bearer <token>

### 2.1 认证

- POST /auth/login
- GET /auth/me

### 2.2 学科与资源

- GET /subjects
- GET /subjects/{subjectId}/resources?keyword=&sort=hot|new
- POST /subjects/{subjectId}/resources（投稿）
- POST /subjects/{subjectId}/requests（栏目申请）

### 2.3 评论与点赞/举报

- GET /resources/{resourceId}/comments
- POST /resources/{resourceId}/comments
- POST /resources/{resourceId}/likes
- POST /resources/{resourceId}/report

### 2.4 常用网站与分区

- GET /sites/sections
- POST /sites/sections
- PATCH /sites/sections/{sectionId}
- DELETE /sites/sections/{sectionId}

- GET /sites
- POST /sites
- PATCH /sites/{siteId}
- DELETE /sites/{siteId}
- PATCH /sites/{siteId}/assign

### 2.5 待办 / 稍后再学

- GET /todos
- POST /todos
- PATCH /todos/{todoId}
- DELETE /todos/{todoId}

- GET /later
- POST /later
- DELETE /later/{resourceId}

### 2.6 自习室

- GET /study-room/online

